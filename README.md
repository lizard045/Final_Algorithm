# DAG任務調度問題 - 遺傳演算法求解

## 專案概述

本專案使用**遺傳演算法 (Genetic Algorithm, GA)** 來解決**DAG任務調度問題**，目標是在異質多處理器系統中找到最優的任務分配方案，最小化總完成時間 (Makespan)。

## 系統架構

### 核心類別
- **Task.java**: 儲存任務資訊，包含計算成本、依賴關係、數據傳輸量
- **Processor.java**: 儲存處理器資訊和任務調度狀態
- **DAG.java**: 管理任務依賴關係，解析DAG檔案
- **Schedule.java**: 表示一個調度方案並計算適應度值
- **GA.java**: 實現完整的遺傳演算法邏輯
- **Main.java**: 主程式，執行實驗並輸出結果

### 資料檔案
- **n4_00.dag**: 同質性系統 (所有處理器性能相同)
- **n4_02.dag**: 異質性系統 (處理器性能不同)
- **n4_04.dag**: 異質性系統
- **n4_06.dag**: 異質性系統

## 演算法特性

### GA參數設定
- **族群大小**: 100
- **最大世代**: 300
- **交叉率**: 0.8
- **突變率**: 0.02
- **菁英率**: 0.1

### 編碼方式
- 使用整數編碼：`chromosome[i] = j` 表示任務i分配給處理器j
- 染色體長度 = 任務數量 (20)

### 適應度函數
- 目標：最小化 Makespan (總完成時間)
- 考慮因素：
  - 任務計算時間
  - 處理器間通訊成本
  - 任務依賴約束

### 演算法操作
- **選擇**: 錦標賽選擇 (錦標賽大小=5)
- **交叉**: 單點交叉
- **突變**: 
  - 同質性系統：隨機突變
  - 異質性系統：智能突變 (偏向選擇成本較低的處理器)
- **菁英保留**: 保留10%最佳個體

## 使用說明

### 編譯程式
```bash
# Windows
compile.bat

# 或手動編譯
javac -d bin src/*.java
```

### 執行程式
```bash
# Windows
run.bat

# 或手動執行
cd bin
java Main
```

### 程式輸出
程式會對所有DAG檔案進行實驗，每個檔案執行5次，並輸出：
- **Best**: 最佳解
- **Worst**: 最差解
- **Average**: 平均值
- **Standard Deviation**: 標準差
- **Average Running Time**: 平均執行時間

## 實驗結果分析

### 效能指標
1. **Makespan**: 所有任務完成的總時間
2. **收斂性**: 演算法收斂速度
3. **穩定性**: 多次執行結果的一致性
4. **執行時間**: 演算法運行效率

### 系統比較
- **同質性系統 (n4_00.dag)**: 所有處理器性能相同，較容易優化
- **異質性系統 (n4_02/04/06.dag)**: 處理器性能不同，需要更智能的分配策略

## 演算法優化

### 智能突變
針對異質性系統實現智能突變策略：
- 70%機率選擇執行成本最低的處理器
- 30%機率隨機選擇處理器
- 提高解的質量和收斂速度

### 貪心初始化
在族群初始化時使用貪心策略：
- 為每個任務選擇執行成本最小的處理器
- 提供良好的起始解

## 檔案結構
```
project/
├── src/                    # 原始碼目錄
│   ├── Task.java
│   ├── Processor.java
│   ├── DAG.java
│   ├── Schedule.java
│   ├── GA.java
│   └── Main.java
├── bin/                    # 編譯後的class檔案
├── n4_00.dag              # DAG資料檔案
├── n4_02.dag
├── n4_04.dag
├── n4_06.dag
├── compile.bat            # 編譯腳本
├── run.bat               # 執行腳本
└── README.md             # 說明文件
```

## 技術特點

1. **物件導向設計**: 清晰的類別結構和職責分離
2. **演算法模組化**: GA組件可獨立測試和調整
3. **靈活的參數設定**: 支援不同的GA參數組合
4. **完整的統計功能**: 提供詳細的實驗結果分析
5. **異質性系統支援**: 針對不同系統類型優化策略

## 未來改進方向

1. **多目標優化**: 考慮能耗、負載均衡等其他目標
2. **混合演算法**: 結合其他啟發式算法提升效能
3. **動態調度**: 支援任務動態到達的場景
4. **並行化**: 利用多線程加速GA運算
5. **圖形化介面**: 提供視覺化的結果展示 